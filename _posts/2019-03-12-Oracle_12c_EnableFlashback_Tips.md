---
layout: post
title: "Oracle 12c enable Flashback Database Tips"
category: Oracle
tags: Oracle Tips
---

* content
{:toc}




Oracle 12c enable Flashback Database Tips

By Flashback Database, we can flashback the database to a previous point in time without media recovery (without restoring backup copies of the datafiles). 

When the database is running, Flashback Database buffers and writes before-images of data blocks to flashback logs, which are generated by default for all permanent tablespaces and which reside in the fast recovery area (FRA).

Flashback logs allow Flashback Database to reduce the time to correct an error proportionally to the time it takes to detect the error, rather than to media recovery time (when Flashback Database is not enabled), which depends on database size.







### Enable Flashback Database steps


01. Set db to mount status

	shutdown immediate;
	startup mount;

02. Set db into archivelog status

	alter database archivelog;
	archive log list;
	
03. Set flashback retention target time(minutes)

	2*24*60=2880 -> 48 hours
	alter system set db_flashback_retention_target=2800;

04. Set recovery dest and size

	alter system set db_recovery_file_dest_size=20G;
	alter system set db_recovery_file_dest='+FRA';

05. Set undo retention(second)/half of db_flashback_retention_target

24*60*60 = 86400 -> 24 hours
	alter system set undo_retention-86400;

06. Set flashback on
	alter database force logging;
	alter database flashback on;
	alter database open;

### Some documents

[Database Backup and Recovery User's Guide](https://docs.oracle.com/database/121/BRADV/flashdb.htm#BRADV601)


Have a good work&life! 2019/03 via LinHong




---
layout: post
title: "MySQL 8.0 Study 012 Tips"
category: MySQL
tags: MySQL Tips
---

* content
{:toc}

MySQL 8.0 Study 012 Tips

学习系列
- MySQL CTE







### MySQL CTE

CTE(公用表表达式)是一个命名的临时结果集，仅在单个SQL语句的执行范围内存在。与派生表类似，CTE不作为对象存储，仅在查询执行期间持续。与派生表不同，CTE可以是自引用。此外，与派生表相比，CTE提供了更好的可读性和性能。CTE的结构包括:名称，可选列列表和定义CTE的查询。定义CTE后，可以像SELECT，INSERT，UPDATE，DELETE或视图一样使用。

CTE有两种用法，非递归的CTE和递归的CTE。非递归的CTE可以用来增加代码的可读性，增加逻辑的结构化表达。递归的CTE，应用的场景也比较多，比如查询某结构下的子结构，每个子结构下面的子结构等等，就需要使用递归的方式。递归的CTE当然递归不会无限下去，不同的数据库有不同的递归限制，MySQL8.0中默认限制的最大递归次数是1000。超过最大低估次数会报错：`Recursive query aborted after 1001 iterations. Try increasing @@cte_max_recursion_depth to a larger value`，由参数`cte_max_recursion_depth`决定。



### Referece

参考:

[MySQL8.0之CTE(公用表表达式)](https://developer.aliyun.com/article/719994)


Have a good work&life! 2023/02 via LinHong



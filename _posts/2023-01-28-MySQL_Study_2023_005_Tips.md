---
layout: post
title: "MySQL 8.0 Study 005 Tips"
category: MySQL
tags: MySQL Tips
---

* content
{:toc}

MySQL 8.0 Study 005 Tips

学习系列

- MySQL 存储引擎
- MySQL 锁相关(脏读/不可重复度/幻读)





### MySQL 存储引擎

MySQL支持的存储引擎和对应是否支持事务等信息

MySQL5.5.5开始InnoDB为默认存储引擎

创建表时候可以指定存储引擎类型

也可以通过`alter table`修改表的存储引擎类型

通过`show create table xxx`来查看表的存储引擎

```
mysql [localhost:8032] {msandbox} (test) > show engines;
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
| ndbcluster         | NO      | Clustered, fault-tolerant tables                               | NULL         | NULL | NULL       |
| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |
| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |
| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |
| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |
| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |
| ndbinfo            | NO      | MySQL Cluster system information storage engine                | NULL         | NULL | NULL       |
| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |
| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |
| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |
| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
11 rows in set (0.00 sec)

mysql [localhost:8032] {msandbox} (test) > create table test01(id int) engine=memory;
Query OK, 0 rows affected (0.08 sec)

mysql [localhost:8032] {msandbox} (test) > alter table test01 engine=innodb;
Query OK, 0 rows affected (0.12 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql [localhost:8032] {msandbox} (test) > show create table test01\G
*************************** 1. row ***************************
       Table: test01
Create Table: CREATE TABLE `test01` (
  `id` int DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
1 row in set (0.00 sec)

mysql [localhost:8032] {msandbox} (test) > 
```

### MySQL 锁相关(脏读/不可重复度/幻读)

脏读
```
当前事务读取到另外一个事务未提交的一条记录
如果另外一个事务在写的时候给记录加上锁，当前事务就无法读取该记录时再获取到锁，就不会出现脏读
```

不可重复读
```
当前事务先读取一条记录，另外一个事务对该记录就行修改。当前事务再次读取到不同的记录。
如果当前事务读取该记录时候加锁，另外一个事务就无法修改改记录。
```

幻读
```
当前事务读取了某些条件的记录，之后别的事务又插入符合相同条件的新记录，导致当前事务再次读取相同条件记录时候，可以读到别的事务插入的新记录
```

读读情况不会引起什么问题，对于写写，读写，写读情况，可能会引起一些问题，这时候需要MVCC(多版本控制)或者加锁方式来解决。

### Referece

参考:


[MySQL 千万数据量深分页优化, 拒绝线上故障](https://blog.csdn.net/qq_37781649/article/details/111689193)

[MySQL大数据量分页查询方法及其优化](https://www.cnblogs.com/geningchao/p/6649907.html)



Have a good work&life! 2023/01 via LinHong


